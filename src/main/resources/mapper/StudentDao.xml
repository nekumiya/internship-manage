<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guet.internship.dao.StudentDao">
<!--    <resultMap id="studentMap" type="com.guet.internship.mbg.model.Student" autoMapping="true">-->
<!--        <id column="id" property="id" jdbcType="INTEGER"/>-->
<!--        <result column="sign_in" property="signIn" jdbcType="TIMESTAMP"/>-->
<!--        <result column="student_id" property="studentId" jdbcType="VARCHAR"/>-->
<!--        <result column="admin_id" property="adminId" jdbcType="VARCHAR"/>-->
<!--    </resultMap>-->

    <select id="selectAbsentStudents" parameterType="list" resultType="com.guet.internship.mbg.model.Student">
        SELECT
            *
        FROM
            student
        LEFT JOIN
            (
                SELECT
                    student_id AS i
                FROM
                    sign
                <where>
                    student_id IN
                    <foreach collection="presentList" item="item" separator="," open="(" close=")" index="">
                        #{item.account}
                    </foreach>
                </where>
            ) AS t1 ON student.account = t1.i
        WHERE
            student.class_id = #{classId}
            AND t1.i IS NULL
    </select>


</mapper>